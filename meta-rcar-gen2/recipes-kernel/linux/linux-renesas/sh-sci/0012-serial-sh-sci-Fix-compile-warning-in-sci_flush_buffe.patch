From ddf50e26be7df3869eb62f1fd7bac9644ef9fca3 Mon Sep 17 00:00:00 2001
From: Kazuya Mizuguchi <kazuya.mizuguchi.ks@renesas.com>
Date: Fri, 23 Oct 2015 11:27:51 +0900
Subject: [PATCH 12/13] serial: sh-sci: Fix compile warning in sci_flush_buffer

Signed-off-by: Kazuya Mizuguchi <kazuya.mizuguchi.ks@renesas.com>
---
 drivers/tty/serial/sh-sci.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/tty/serial/sh-sci.c b/drivers/tty/serial/sh-sci.c
index 3007fe1..fa58a2a 100644
--- a/drivers/tty/serial/sh-sci.c
+++ b/drivers/tty/serial/sh-sci.c
@@ -2023,9 +2023,9 @@ static void sci_baud_calc_hscif(unsigned int bps, unsigned long freq,
 
 static void sci_flush_buffer(struct uart_port *port)
 {
+#ifdef CONFIG_SERIAL_SH_SCI_DMA
 	struct sci_port *s = to_sci_port(port);
 
-#ifdef CONFIG_SERIAL_SH_SCI_DMA
 	s->circ_flush_flag = SCI_CIRC_FLSH_ON;
 #endif
 }
-- 
1.9.1

